<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday My Dear</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100vh;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;

      /* ðŸŒŒ Constant background */
      background: url("https://imgs.search.brave.com/lEXV7OpBqtilhlDCS7eSBrObEJH8POIIukME6B_nVWA/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/cHJlbWl1bS1waG90/by9iYWNrZ3JvdW5k/LWltYWdlLXBpbmst/cm9zZXNfMzkxMzEt/MTU1LmpwZz9zZW10/PWFpc19oeWJyaWQm/dz03NDAmcT04MA") no-repeat center center fixed;
      background-size: cover;
    }

    /* Envelope wrapper */
    .envelope-wrapper {
      position: relative;
      width: 300px;
      height: 200px;
      perspective: 1000px;
      cursor: pointer;
      z-index: 10;
    }

    .envelope {
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 1.2s ease-in-out;
      transform-origin: bottom center; /* flip like flap */
    }

    .envelope.open {
      transform: rotateX(180deg);
    }

    .envelope img {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.6);
    }

    .envelope .back {
      transform: rotateX(180deg);
    }

    /* Letter container */
    .letter-container {
      position: relative;
      z-index: 2;
      display: none;
      flex-direction: column;
      gap: 20px;
      max-width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
      padding: 20px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.05);
      scroll-behavior: smooth;
      animation: glow 3s ease-in-out infinite alternate;
    }

    .letter-container img {
      width: auto;
      max-width: 600px;
      max-height: 80vh;
      margin: 0 auto;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.6);
    }

    @media (max-width: 700px) {
      .letter-container img {
        max-width: 90vw;
        max-height: 70vh;
      }
    }

    /* ðŸŒ¹ Falling roses overlay */
    .rose {
      position: absolute;
      top: -100px;
      animation: fall linear infinite;
      opacity: 0.9;
      pointer-events: none;
      z-index: 3;
    }

    @keyframes fall {
      to {
        transform: translateY(110vh) translateX(30px) rotate(720deg);
      }
    }

    /* âœ¨ Glow effect for letter */
    @keyframes glow {
      from {
        box-shadow: 0 0 20px rgba(255,0,0,0.5);
      }
      to {
        box-shadow: 0 0 40px rgba(255,0,0,0.9);
      }
    }
  </style>
</head>
<body>

  <!-- ðŸŽµ Background Music -->
  <audio id="bg-music" loop>
    <source src="https://cdn.discordapp.com/attachments/1413749010430165003/1413985675954356426/The_Weeknd_-_Coming_Down_Lyrics.mp3?ex=68bfe687&is=68be9507&hm=2925bf7fc42c6f575098c38f4c49c69b09684ddaac11c738022cc24122ed3e8e&" type="audio/mpeg">
  </audio>

  <!-- ðŸ’Œ Envelope -->
  <div class="envelope-wrapper" id="envelope-wrapper">
    <div class="envelope" id="envelope">
      <img src="https://media.discordapp.net/attachments/1413749010430165003/1414664836352315525/front_envelope.png?ex=68c064cc&is=68bf134c&hm=aa1261624e36c009c785bb2c54518601f9c3a8c24530abec8942a58b28a25a64&=&format=webp&quality=lossless&width=1818&height=789" alt="Envelope Front" class="front">
      <img src="https://media.discordapp.net/attachments/1413749010430165003/1414664835089694862/back_open.png?ex=68c064cb&is=68bf134b&hm=111844a3c3e91086b909a7ae675bb3ab6b79ec7de64f490a11aefb09d2f93a6e&=&format=webp&quality=lossless&width=523&height=389" alt="Envelope Back" class="back">
    </div>
  </div>

  <!-- ðŸ“œ Letter Images -->
  <div class="letter-container" id="letter">
    <img src="https://media.discordapp.net/attachments/1413749010430165003/1414666245969809438/letter_1.png?ex=68c0661c&is=68bf149c&hm=0af9ec422b814200f198995b0a9d05edcb1db0890e3b16124161fedd9628a965&=&format=webp&quality=lossless&width=797&height=1029" alt="Letter Part 1">
  </div>

  <script>
    const audio = document.getElementById("bg-music");
    audio.volume = 0.0; // start muted

    const envelopeWrapper = document.getElementById("envelope-wrapper");
    const envelope = document.getElementById("envelope");
    const letter = document.getElementById("letter");

    // Smooth fade in for music
    function fadeInAudio(audio, duration = 3000, maxVolume = 0.02) {
      audio.volume = 0;
      audio.play().catch(() => {});
      let step = maxVolume / (duration / 100);
      let fade = setInterval(() => {
        if (audio.volume < maxVolume) {
          audio.volume = Math.min(audio.volume + step, maxVolume);
        } else {
          clearInterval(fade);
        }
      }, 100);
    }

    envelopeWrapper.addEventListener("click", () => {
      envelope.classList.add("open");

      setTimeout(() => {
        envelopeWrapper.style.display = "none";
        letter.style.display = "flex";
      }, 1200); // wait for animation

      fadeInAudio(audio, 4000); // start music fade in
    });

    // ðŸŒ¹ Falling roses
    const roseImages = [
      "https://imgs.search.brave.com/T6Y077SEOr8ZNx8pWjOMoGiJAmrtTq3gDIlZFGc-M3w/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93d3cu/ZnJlZXBuZ2xvZ29z/LmNvbS91cGxvYWRz/L3Jvc2UtcG5nL3Jl/ZC1yb3NlLXBuZy1p/bWFnZS10cmFuc3Bh/cmVudC0zMi5wbmc"
    ];

    function createRose() {
      const rose = document.createElement("img");
      rose.classList.add("rose");
      rose.src = roseImages[Math.floor(Math.random() * roseImages.length)];

      rose.style.left = Math.random() * 100 + "vw";
      rose.style.animationDuration = (5 + Math.random() * 5) + "s";
      rose.style.width = (20 + Math.random() * 40) + "px";
      rose.style.transform = `rotate(${Math.random() * 360}deg)`;

      document.body.appendChild(rose);

      setTimeout(() => {
        rose.remove();
      }, 10000);
    }

    setInterval(createRose, 900);
  </script>
</body>
</html>
